<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>猫咪爱好者帖子</title>
    <!-- 引入Tailwind CSS框架 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入Font Awesome图标库 -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- Tailwind自定义配置 - 扩展主题颜色和字体 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6', // 主色调：蓝色（按钮、交互元素）
                        secondary: '#10B981', // 辅助色：绿色（点赞、成功）
                        accent: '#F59E0B', // 强调色：橙色（标识、热门）
                        dark: '#1F2937', // 深色（标题、文本）
                        light: '#F3F4F6' // 浅色（背景、边框）
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <!-- 自定义Tailwind工具类 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-hover {
                transition: all 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            }
            .reply-hover {
                transition: background-color 0.2s ease;
            }
            .reply-hover:hover {
                background-color: rgba(59, 130, 246, 0.03);
            }
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <div class="space-y-6">
        <main class="container mx-auto px-4 py-6 flex flex-col md:flex-row gap-6">


            <!-- 中间内容区 - 核心帖子+回复功能 -->
            <section class="md:w-3/5 lg:w-4/6 flex-grow">
                <!-- 核心帖子（保留1个，确保图片显示完全） -->
                <article class="bg-white rounded-xl shadow-sm overflow-hidden card-hover mb-4">
                    <div class="p-4">
                        <div class="flex items-start space-x-3">
                            <img src="https://picsum.photos/id/237/40/40" alt="作者头像"
                                class="w-10 h-10 rounded-full object-cover">
                            <div class="flex-grow">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h3 class="font-medium text-dark">猫咪爱好者</h3>
                                        <p class="text-xs text-gray-500">2小时前 · 萌宠吧</p>
                                    </div>
                                    <button class="text-gray-400 hover:text-gray-600 transition-colors">
                                        <i class="fa fa-ellipsis-h"></i>
                                    </button>
                                </div>

                                <div class="mt-3">
                                    <h4 class="text-lg font-semibold text-dark mb-2">我家猫咪今天特别乖，分享几张照片~</h4>
                                    <p class="text-gray-600 mb-3">今天给它买了新玩具，玩了一整天，现在终于安静下来了，看着它睡觉的样子太治愈了！</p>

                                    <!-- 图片组（优化：确保显示完全） -->
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-2 mb-3">
                                        <div class="aspect-[4/3] bg-gray-50 rounded-lg overflow-hidden">
                                            <img src="https://picsum.photos/id/40/500/375" alt="猫咪照片1"
                                                class="w-full h-full object-contain">
                                        </div>
                                        <div class="aspect-[4/3] bg-gray-50 rounded-lg overflow-hidden">
                                            <img src="https://picsum.photos/id/41/500/375" alt="猫咪照片2"
                                                class="w-full h-full object-contain">
                                        </div>
                                        <div class="aspect-[4/3] bg-gray-50 rounded-lg overflow-hidden">
                                            <img src="https://picsum.photos/id/42/500/375" alt="猫咪照片3"
                                                class="w-full h-full object-contain">
                                        </div>
                                    </div>
                                </div>

                                <!-- 帖子互动区 -->
                              <div class="flex justify-between items-center text-sm text-gray-500 pt-2 border-t border-gray-100">
                                              <button class="flex items-center space-x-1 hover:text-primary transition-colors">
                                                  <i class="fa fa-thumbs-o-up"></i>
                                                  <span>128</span>
                                              </button>
                                              <button class="flex items-center space-x-1 hover:text-primary transition-colors">
                                                  <i class="fa fa-comment-o"></i>
                                                  <span id="replyCount">3</span> <!-- 回复数动态显示 -->
                                              </button>
                                              <button class="flex items-center space-x-1 hover:text-primary transition-colors">
                                                  <i class="fa fa-star-o"></i>
                                                  <span>45</span>
                                              </button>
                                              <button class="flex items-center space-x-1 hover:text-primary transition-colors">
                                                  <i class="fa fa-share-alt"></i>
                                                  <span>分享</span>
                                              </button>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                </article>

                <!-- 1. 回复输入框（核心功能：用户发表回复） -->
                <div class="bg-white rounded-xl shadow-sm p-4 mb-4">
                    <div class="flex items-start space-x-3">
                        <!-- 当前用户头像 -->
                        <img src="https://picsum.photos/id/64/40/40" alt="你的头像"
                            class="w-9 h-9 rounded-full object-cover">
                        <div class="flex-grow">
                            <!-- 回复输入框 -->
                            <textarea id="replyContent" 
                                      placeholder="来说说你的看法..." 
                                      class="w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary resize-none min-h-[80px] text-sm"
                                      maxlength="200"></textarea>
                            <!-- 输入字数提示 -->
                            <div class="flex justify-between items-center mt-2">
                                <span id="wordCount" class="text-xs text-gray-500">0/200</span>
                                <!-- 发表回复按钮 -->
                                <button id="submitReply" class="bg-primary text-white px-4 py-1.5 rounded-lg text-sm hover:bg-primary/90 transition-colors">
                                    发表回复
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. 回复列表（核心功能：展示已有回复+互动） -->
                <div class="bg-white rounded-xl shadow-sm p-4 mb-6" id="replyList">
                    <h5 class="font-medium text-dark mb-3">全部回复 (3)</h5>

                    <!-- 回复1：普通用户回复 -->
                    <div class="flex items-start space-x-3 mb-4 reply-hover p-2 rounded-lg">
                        <img src="https://picsum.photos/id/1005/40/40" alt="用户头像"
                            class="w-8 h-8 rounded-full object-cover">
                        <div class="flex-grow">
                            <div class="flex items-center justify-between">
                                <h6 class="font-medium text-sm text-dark">铲屎官小橘</h6>
                                <span class="text-xs text-gray-500">1小时前</span>
                            </div>
                            <p class="text-sm text-gray-600 mt-1">好可爱的猫咪！请问新玩具是什么呀？我家猫咪也很喜欢玩玩具~</p>
                            <!-- 回复互动（点赞+回复，格式统一） -->
                            <div class="flex space-x-4 mt-2">
                                <button class="flex items-center space-x-1 text-xs text-gray-500 hover:text-secondary transition-colors reply-like" data-id="1">
                                    <i class="fa fa-thumbs-o-up"></i>
                                    <span>28</span>
                                </button>
                                <button class="flex items-center space-x-1 text-xs text-gray-500 hover:text-primary transition-colors reply-reply" data-id="1">
                                    <i class="fa fa-comment-o"></i>
                                    <span>回复</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 回复2：帖子作者回复（标红“作者”标识） -->
                    <div class="flex items-start space-x-3 mb-4 reply-hover p-2 rounded-lg">
                        <img src="https://picsum.photos/id/237/40/40" alt="作者头像"
                            class="w-8 h-8 rounded-full object-cover">
                        <div class="flex-grow">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <h6 class="font-medium text-sm text-dark">猫咪爱好者</h6>
                                    <span class="ml-1 text-xs text-white bg-primary px-1 rounded">作者</span>
                                </div>
                                <span class="text-xs text-gray-500">50分钟前</span>
                            </div>
                            <p class="text-sm text-gray-600 mt-1">是羽毛逗猫棒！我家猫咪一玩就停不下来，你可以试试~</p>
                            <!-- 回复互动（点赞+回复，格式统一） -->
                            <div class="flex space-x-4 mt-2">
                                <button class="flex items-center space-x-1 text-xs text-gray-500 hover:text-secondary transition-colors reply-like" data-id="2">
                                    <i class="fa fa-thumbs-o-up"></i>
                                    <span>42</span>
                                </button>
                                <button class="flex items-center space-x-1 text-xs text-gray-500 hover:text-primary transition-colors reply-reply" data-id="2">
                                    <i class="fa fa-comment-o"></i>
                                    <span>回复</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 回复3：普通用户回复 -->
                    <div class="flex items-start space-x-3 reply-hover p-2 rounded-lg">
                        <img src="https://picsum.photos/id/1012/40/40" alt="用户头像"
                            class="w-8 h-8 rounded-full object-cover">
                        <div class="flex-grow">
                            <div class="flex items-center justify-between">
                                <h6 class="font-medium text-sm text-dark">猫主子大人</h6>
                                <span class="text-xs text-gray-500">20分钟前</span>
                            </div>
                            <p class="text-sm text-gray-600 mt-1">第三张照片太治愈了！猫咪睡觉的样子真的让人心情变好~</p>
                            <!-- 回复互动（点赞+回复，格式统一） -->
                            <div class="flex space-x-4 mt-2">
                                <button class="flex items-center space-x-1 text-xs text-gray-500 hover:text-secondary transition-colors reply-like" data-id="3">
                                    <i class="fa fa-thumbs-o-up"></i>
                                    <span>15</span>
                                </button>
                                <button class="flex items-center space-x-1 text-xs text-gray-500 hover:text-primary transition-colors reply-reply" data-id="3">
                                    <i class="fa fa-comment-o"></i>
                                    <span>回复</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 回复功能JS（发表回复、点赞、字数统计、回复交互） -->
<script>
    // 1. 回复输入字数统计
    const replyContent = document.getElementById('replyContent');
    const wordCount = document.getElementById('wordCount');
    
    replyContent.addEventListener('input', function() {
        const length = this.value.trim().length;
        wordCount.textContent = `${length}/200`;
        // 超过200字截断
        if (length > 200) {
            this.value = this.value.substring(0, 200);
            wordCount.textContent = '200/200';
        }
    });

    // 2. 发表回复功能
    const submitReply = document.getElementById('submitReply');
    const replyList = document.getElementById('replyList');
    const replyCount = document.getElementById('replyCount');
    
    submitReply.addEventListener('click', function() {
        const content = replyContent.value.trim();
        if (!content) {
            alert('请输入回复内容');
            return;
        }

        // 生成新回复HTML（包含统一格式的点赞+回复按钮）- 修复模板字符串语法
        const newReplyId = 'new_' + Date.now(); // 生成唯一ID
        const newReply = `
            <div class="flex items-start space-x-3 mb-4 reply-hover p-2 rounded-lg">
                <img src="https://picsum.photos/id/64/40/40" alt="你的头像"
                    class="w-8 h-8 rounded-full object-cover">
                <div class="flex-grow">
                    <div class="flex items-center justify-between">
                        <h6 class="font-medium text-sm text-dark">我</h6>
                        <span class="text-xs text-gray-500">刚刚</span>
                    </div>
                    <p class="text-sm text-gray-600 mt-1">${content}</p>
                    <!-- 新回复的互动按钮（格式统一） -->
                    <div class="flex space-x-4 mt-2">
                        <button class="flex items-center space-x-1 text-xs text-gray-500 hover:text-secondary transition-colors reply-like" data-id="${newReplyId}">
                            <i class="fa fa-thumbs-o-up"></i>
                            <span>0</span>
                        </button>
                        <button class="flex items-center space-x-1 text-xs text-gray-500 hover:text-primary transition-colors reply-reply" data-id="${newReplyId}">
                            <i class="fa fa-comment-o"></i>
                            <span>回复</span>
                        </button>
                    </div>
                </div>
            </div>
        `;

        // 添加到回复列表顶部
        replyList.insertAdjacentHTML('afterbegin', newReply);
        // 更新回复数
        const currentCount = parseInt(replyCount.textContent);
        replyCount.textContent = currentCount + 1;
        // 清空输入框
        replyContent.value = '';
        wordCount.textContent = '0/200';
        // 滚动到新回复位置
        document.querySelector(`.reply-like[data-id="${newReplyId}"]`).scrollIntoView({ behavior: 'smooth', block: 'center' });
    });

    // 3. 回复点赞功能（切换状态+计数）
    document.addEventListener('click', function(e) {
        // 点赞功能
        if (e.target.closest('.reply-like')) {
            const likeBtn = e.target.closest('.reply-like');
            const likeIcon = likeBtn.querySelector('i');
            const likeNum = likeBtn.querySelector('span');
            const currentNum = parseInt(likeNum.textContent);

            // 切换点赞状态
            if (likeIcon.classList.contains('fa-thumbs-o-up')) {
                likeIcon.classList.replace('fa-thumbs-o-up', 'fa-thumbs-up');
                likeBtn.classList.add('text-secondary');
                likeNum.textContent = currentNum + 1;
            } else {
                likeIcon.classList.replace('fa-thumbs-up', 'fa-thumbs-o-up');
                likeBtn.classList.remove('text-secondary');
                likeNum.textContent = currentNum - 1;
            }
        }

        // 回复功能（点击后聚焦输入框，可扩展@功能）
        if (e.target.closest('.reply-reply')) {
            const replyBtn = e.target.closest('.reply-reply');
            const replyId = replyBtn.getAttribute('data-id');
            const userName = replyBtn.closest('.flex-grow').querySelector('h6').textContent;
            
            // 聚焦输入框并填充@内容
            replyContent.value = `@${userName} `;
            replyContent.focus();
            // 光标定位到@内容末尾
            const cursorPosition = replyContent.value.length;
            if (replyContent.setSelectionRange) {
                replyContent.setSelectionRange(cursorPosition, cursorPosition);
            } else if (replyContent.createTextRange) {
                const range = replyContent.createTextRange();
                range.collapse(true);
                range.moveEnd('character', cursorPosition);
                range.moveStart('character', cursorPosition);
                range.select();
            }
        }
    });
</script>